<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meine 7-Tage Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#efeefe',
                            100: '#e0dffd',
                            200: '#c2c0fb',
                            300: '#a4a2f8',
                            400: '#8684f5',
                            500: '#6866f2',
                            600: '#5D5CDE', // Primary color
                            700: '#4a49b1',
                            800: '#3c3b8e',
                            900: '#2e2d6b',
                        },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.5s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Check if dark mode is preferred */
        @media (prefers-color-scheme: dark) {
            :root {
                color-scheme: dark;
            }
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .active {
            display: block;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        .challenge-card {
            transition: all 0.3s ease;
        }
        
        .challenge-card:hover {
            transform: translateY(-5px);
        }
        
        .selected {
            border-color: #5D5CDE;
            background-color: rgba(93, 92, 222, 0.1);
        }
        
        .tab {
            transition: all 0.2s ease;
        }
        
        /* Custom radio buttons */
        input[type="radio"] {
            display: none;
        }
        
        .radio-label {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .radio-label.selected {
            background-color: rgba(93, 92, 222, 0.2);
            border-color: #5D5CDE;
        }
        
        /* Emoji mood selector */
        .mood-emoji {
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        
        .mood-emoji:hover {
            transform: scale(1.2);
        }
        
        .mood-emoji.selected {
            transform: scale(1.2);
            filter: drop-shadow(0 0 5px rgba(93, 92, 222, 0.5));
        }
        
        /* Progress circles */
        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        /* Dark mode specific styles */
        .dark .bg-white {
            background-color: #181818;
        }
        
        .dark .text-gray-800 {
            color: #e0e0e0;
        }
        
        .dark .text-gray-700 {
            color: #d0d0d0;
        }
        
        .dark .text-gray-600 {
            color: #b0b0b0;
        }
        
        .dark .border-gray-200 {
            border-color: #303030;
        }
        
        .dark .bg-gray-100 {
            background-color: #222222;
        }
        
        .dark .bg-gray-50 {
            background-color: #1e1e1e;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Header and Navigation -->
    <header class="bg-primary-600 text-white shadow-md">
        <div class="container mx-auto px-4 py-4">
            <h1 class="text-2xl font-bold text-center">Meine 7-Tage Challenge</h1>
            <p class="text-center mt-1">Ein kleines Experiment für eine Woche - du entscheidest, was dir gut tut!</p>
        </div>
        <nav class="bg-primary-700">
            <div class="container mx-auto px-4">
                <div class="flex justify-center space-x-1 sm:space-x-4 overflow-x-auto">
                    <button id="tab-plan" class="tab text-white py-3 px-2 sm:px-4 font-medium border-b-2 border-transparent hover:border-white focus:outline-none">Mein Plan</button>
                    <button id="tab-checkin" class="tab text-white py-3 px-2 sm:px-4 font-medium border-b-2 border-transparent hover:border-white focus:outline-none">Täglicher Check-in</button>
                    <button id="tab-progress" class="tab text-white py-3 px-2 sm:px-4 font-medium border-b-2 border-transparent hover:border-white focus:outline-none">Fortschritt</button>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-6 max-w-4xl">
        <!-- Plan Section -->
        <section id="section-plan" class="section active">
            <h2 class="text-2xl font-bold mb-6">Meine Challenge auswählen</h2>
            <p class="mb-4">Wähle 2-3 kleine Herausforderungen, die du für 7 Tage ausprobieren willst:</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <!-- Screen-Time Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Screen-Time Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="screen-time-challenge" value="screen-time">
                            <label for="screen-time-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="screen-time-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Vor dem Schlafengehen bildschirmfreie Zeit einplanen</p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input type="radio" name="screen-time" id="screen-time-30" value="30 Min." disabled>
                            <label for="screen-time-30" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">30 Min.</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="screen-time" id="screen-time-45" value="45 Min." disabled>
                            <label for="screen-time-45" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">45 Min.</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="screen-time" id="screen-time-60" value="60 Min." disabled>
                            <label for="screen-time-60" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">60 Min.</label>
                        </div>
                    </div>
                </div>
                
                <!-- Sleep-Reset Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Schlaf-Reset Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="sleep-reset-challenge" value="sleep-reset">
                            <label for="sleep-reset-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="sleep-reset-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Jeden Tag zu einer festgelegten Zeit ins Bett gehen</p>
                    
                    <div class="space-y-2">
                        <label for="bedtime" class="block text-gray-700 dark:text-gray-300 mb-1">Meine Schlafenszeit:</label>
                        <input type="time" id="bedtime" name="bedtime" class="form-input w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800" disabled>
                    </div>
                </div>
                
                <!-- Morning-Kickstart Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Morgen-Kickstart Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="morning-kickstart-challenge" value="morning-kickstart">
                            <label for="morning-kickstart-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="morning-kickstart-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Jeden Tag bis zu einer bestimmten Zeit aufstehen</p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input type="radio" name="morning-kickstart" id="morning-kickstart-1100" value="11:00 Uhr" disabled>
                            <label for="morning-kickstart-1100" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">11:00 Uhr</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="morning-kickstart" id="morning-kickstart-1030" value="10:30 Uhr" disabled>
                            <label for="morning-kickstart-1030" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">10:30 Uhr</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="morning-kickstart" id="morning-kickstart-1000" value="10:00 Uhr" disabled>
                            <label for="morning-kickstart-1000" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">10:00 Uhr</label>
                        </div>
                    </div>
                </div>
                
                <!-- Mini-Move Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Mini-Move Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="mini-move-challenge" value="mini-move">
                            <label for="mini-move-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="mini-move-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Ein wenig tägliche Bewegung für Körper und Geist</p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input type="radio" name="mini-move" id="mini-move-stretch" value="5 Min. Dehnen" disabled>
                            <label for="mini-move-stretch" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">5 Min. Dehnen</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="mini-move" id="mini-move-walk" value="Kurzer Spaziergang" disabled>
                            <label for="mini-move-walk" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">Kurzer Spaziergang</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="mini-move" id="mini-move-dance" value="Etwas Tanzen" disabled>
                            <label for="mini-move-dance" class="radio-label ml-2 px-3 py-2 rounded-full border border-gray-300 dark:border-gray-600 w-full text-center">Etwas Tanzen</label>
                        </div>
                    </div>
                </div>
                
                <!-- Family-Peace Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Familien-Frieden Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="family-peace-challenge" value="family-peace">
                            <label for="family-peace-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="family-peace-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Kurze positive Interaktionen mit der Familie</p>
                </div>
                
                <!-- Self-Care Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Selbstfürsorge Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="self-care-challenge" value="self-care">
                            <label for="self-care-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="self-care-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Bewusst etwas tun, das dir gut tut</p>
                </div>
                
                <!-- Custom Challenge -->
                <div class="challenge-card border rounded-lg shadow-sm p-4 dark:border-gray-700">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold">Eigene Challenge</h3>
                        <div class="form-check form-switch">
                            <input type="checkbox" class="challenge-selector sr-only" id="custom-challenge" value="custom">
                            <label for="custom-challenge" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner"></div>
                                    <div id="custom-toggle" class="dot absolute w-4 h-4 bg-white rounded-full shadow -left-1 top-1 transition"></div>
                                </div>
                                <div class="ml-3 text-gray-700 dark:text-gray-300 font-medium">Ich wähle diese Challenge</div>
                            </label>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-400 mt-2 mb-4">Etwas, das du dir selbst vornehmen möchtest</p>
                    
                    <div class="space-y-2">
                        <input type="text" id="custom-challenge-text" class="form-input w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800" placeholder="Meine eigene Challenge..." disabled>
                    </div>
                </div>
            </div>
            
            <!-- Reward Section -->
            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-8 shadow-sm">
                <h3 class="text-xl font-semibold mb-4">Meine Belohnung</h3>
                <p class="mb-4">Wenn ich mindestens 5 von 7 Tagen meine Challenges geschafft habe, belohne ich mich mit:</p>
                <textarea id="reward-text" class="form-textarea w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800" rows="3" placeholder="Meine Belohnung..."></textarea>
            </div>
            
            <!-- Agreement Section -->
            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-8 shadow-sm">
                <h3 class="text-xl font-semibold mb-4">Meine Vereinbarung</h3>
                <p class="mb-4">Ich probiere diese Challenge für 7 Tage aus. Danach entscheide ich selbst, ob ich weitermachen möchte.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="start-date" class="block text-gray-700 dark:text-gray-300 mb-1">Startdatum:</label>
                        <input type="date" id="start-date" class="form-input w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800">
                    </div>
                    <div>
                        <label for="name" class="block text-gray-700 dark:text-gray-300 mb-1">Mein Name:</label>
                        <input type="text" id="name" class="form-input w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800">
                    </div>
                </div>
            </div>
            
            <div class="flex justify-center mt-6">
                <button id="save-plan" class="px-6 py-3 bg-primary-600 text-white font-medium rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 transition">Meinen Plan speichern</button>
            </div>
            
            <div id="plan-saved-message" class="hidden mt-6 p-4 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-lg text-center">
                Dein Plan wurde gespeichert! Jetzt kannst du zum täglichen Check-in wechseln.
            </div>
        </section>
        
        <!-- Daily Check-in Section -->
        <section id="section-checkin" class="section">
            <h2 class="text-2xl font-bold mb-6">Mein täglicher Check-in</h2>
            <p class="mb-4">Hier kannst du festhalten, wie dein Tag war und was du geschafft hast.</p>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6">
                <div class="mb-4">
                    <label for="checkin-date" class="block text-gray-700 dark:text-gray-300 mb-1">Datum:</label>
                    <input type="date" id="checkin-date" class="form-input w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800">
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 dark:text-gray-300 mb-3">Wie fühlst du dich heute?</label>
                    <div class="grid grid-cols-5 gap-2 text-center">
                        <div id="mood-1" class="mood-option">
                            <div class="mood-emoji text-3xl mb-1">😢</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Sehr schlecht</div>
                        </div>
                        <div id="mood-2" class="mood-option">
                            <div class="mood-emoji text-3xl mb-1">😕</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Schlecht</div>
                        </div>
                        <div id="mood-3" class="mood-option">
                            <div class="mood-emoji text-3xl mb-1">😐</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Neutral</div>
                        </div>
                        <div id="mood-4" class="mood-option">
                            <div class="mood-emoji text-3xl mb-1">🙂</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Gut</div>
                        </div>
                        <div id="mood-5" class="mood-option">
                            <div class="mood-emoji text-3xl mb-1">😄</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Sehr gut</div>
                        </div>
                    </div>
                </div>
                
                <div id="challenge-checklist" class="mb-4">
                    <label class="block text-gray-700 dark:text-gray-300 mb-2">Was hast du heute geschafft?</label>
                    <p class="text-gray-500 dark:text-gray-400 text-sm italic mb-4">Deine Challenges werden hier angezeigt, wenn du deinen Plan gespeichert hast.</p>
                </div>
                
                <div class="mb-4">
                    <label for="daily-note" class="block text-gray-700 dark:text-gray-300 mb-1">Notiz für heute</label>
                    <textarea id="daily-note" class="form-textarea w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800" rows="3"></textarea>
                </div>
                
                <div class="flex flex-col gap-3 justify-center mt-6">
                    <button id="save-checkin" class="px-6 py-3 bg-primary-600 text-white font-medium rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 transition">Eintrag speichern</button>
                    <button id="share-checkin" class="px-6 py-3 bg-green-600 text-white font-medium rounded-lg shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition">📱 Bericht an Coach senden</button>
                </div>
                
                <div id="checkin-saved-message" class="hidden mt-6 p-4 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-lg text-center">
                    Dein Eintrag wurde gespeichert! Super gemacht!
                </div>
            </div>
            
            <div class="mt-8">
                <h3 class="text-xl font-semibold mb-4">Tägliche Einträge</h3>
                <div id="daily-entries" class="space-y-4">
                    <!-- Entries will be dynamically added here -->
                    <p id="no-entries-message" class="text-gray-500 dark:text-gray-400 text-center py-8">Noch keine Einträge vorhanden.</p>
                </div>
            </div>
        </section>
        
        <!-- Progress Section -->
        <section id="section-progress" class="section">
            <h2 class="text-2xl font-bold mb-6">Mein 7-Tage Fortschritt</h2>
            <p class="mb-4">Hier siehst du, wie weit du schon gekommen bist:</p>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8">
                <div class="flex justify-between items-center mb-6 overflow-x-auto">
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="1">1</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="2">2</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="3">3</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="4">4</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="5">5</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="6">6</div>
                    <div class="h-1 w-full bg-gray-200 dark:bg-gray-700"></div>
                    <div class="progress-circle bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 flex-shrink-0" data-day="7">7</div>
                </div>
                
                <div class="text-center mb-6">
                    <h4 class="font-medium">Dein Ziel: 5 von 7 Tagen</h4>
                    <p id="days-completed" class="text-lg mt-2">Du hast bisher 0 von 7 Tagen geschafft</p>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                    <h3 class="text-xl font-semibold mb-4">Meine Stimmung im Verlauf</h3>
                    <div class="w-full h-64">
                        <canvas id="mood-chart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                    <h3 class="text-xl font-semibold mb-4">Meine Belohnung:</h3>
                    <div id="reward-display" class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg min-h-[100px] flex items-center justify-center">
                        <p class="text-gray-500 dark:text-gray-400">Wird geladen...</p>
                    </div>
                    
                    <div id="reward-status" class="mt-6 text-center hidden">
                        <p class="text-lg font-medium text-green-600 dark:text-green-400">Du hast dein Ziel erreicht! 🎉</p>
                        <p class="mt-2">Gönne dir deine Belohnung, du hast es verdient!</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mt-8">
                <h3 class="text-xl font-semibold mb-4">Meine Erkenntnisse</h3>
                <p class="mb-4">Nach den 7 Tagen: Was hat dir geholfen? Was möchtest du beibehalten?</p>
                <textarea id="insights" class="form-textarea w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-base dark:bg-gray-800" rows="6"></textarea>
                
                <div class="flex justify-center mt-6">
                    <button id="save-insights" class="px-6 py-3 bg-primary-600 text-white font-medium rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 transition">Erkenntnisse speichern</button>
                </div>
                
                <div id="insights-saved-message" class="hidden mt-6 p-4 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-lg text-center">
                    Deine Erkenntnisse wurden gespeichert!
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-100 dark:bg-gray-800 py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-gray-600 dark:text-gray-400 text-sm">
            <p>Meine 7-Tage Challenge</p>
        </div>
    </footer>

    <script>
        // Check if dark mode is preferred
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        // Listen for changes in color scheme preference
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
        
        // DOM elements
        const tabs = {
            plan: document.getElementById('tab-plan'),
            checkin: document.getElementById('tab-checkin'),
            progress: document.getElementById('tab-progress')
        };
        
        const sections = {
            plan: document.getElementById('section-plan'),
            checkin: document.getElementById('section-checkin'),
            progress: document.getElementById('section-progress')
        };
        
        // Challenge selectors and their toggle elements
        const challengeSelectors = document.querySelectorAll('.challenge-selector');
        
        // Button elements
        const savePlanButton = document.getElementById('save-plan');
        const saveCheckinButton = document.getElementById('save-checkin');
        const shareCheckinButton = document.getElementById('share-checkin');
        const saveInsightsButton = document.getElementById('save-insights');
        
        // Message elements
        const planSavedMessage = document.getElementById('plan-saved-message');
        const checkinSavedMessage = document.getElementById('checkin-saved-message');
        const insightsSavedMessage = document.getElementById('insights-saved-message');
        
        // Data storage
        const appData = {
            plan: {
                challenges: {},
                reward: '',
                startDate: '',
                name: ''
            },
            checkins: [],
            insights: ''
        };
        
        // Load data from localStorage if available
        function loadData() {
            const savedData = localStorage.getItem('challenge-app-data');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(appData, parsedData);
                
                // Update UI with loaded data
                updateUIFromData();
            }
        }
        
        // Save data to localStorage
        function saveData() {
            localStorage.setItem('challenge-app-data', JSON.stringify(appData));
        }
        
        // Update UI from loaded data
        function updateUIFromData() {
            // Update plan section
            if (appData.plan) {
                document.getElementById('reward-text').value = appData.plan.reward || '';
                document.getElementById('start-date').value = appData.plan.startDate || '';
                document.getElementById('name').value = appData.plan.name || '';
                
                // Update challenge selections
                for (const [key, value] of Object.entries(appData.plan.challenges)) {
                    const checkbox = document.getElementById(`${key}-challenge`);
                    if (checkbox) {
                        checkbox.checked = true;
                        updateToggle(key);
                        
                        // Update challenge options
                        if (key === 'screen-time' && value.option) {
                            document.getElementById(`screen-time-${value.option}`).checked = true;
                            document.querySelector(`label[for="screen-time-${value.option}"]`).classList.add('selected');
                        } else if (key === 'sleep-reset' && value.bedtime) {
                            document.getElementById('bedtime').value = value.bedtime;
                        } else if (key === 'morning-kickstart' && value.option) {
                            document.getElementById(`morning-kickstart-${value.option}`).checked = true;
                            document.querySelector(`label[for="morning-kickstart-${value.option}"]`).classList.add('selected');
                        } else if (key === 'mini-move' && value.option) {
                            document.getElementById(`mini-move-${value.option}`).checked = true;
                            document.querySelector(`label[for="mini-move-${value.option}"]`).classList.add('selected');
                        } else if (key === 'custom' && value.text) {
                            document.getElementById('custom-challenge-text').value = value.text;
                        }
                    }
                }
                
                // Update checklist in checkin section
                updateChallengeChecklist();
            }
            
            // Update progress section
            updateProgressDisplay();
            
            // Update insights
            document.getElementById('insights').value = appData.insights || '';
            
            // Update reward display
            updateRewardDisplay();
        }
        
        // Update toggle visual based on checkbox state
        function updateToggle(id) {
            const toggle = document.getElementById(`${id}-toggle`);
            const checkbox = document.getElementById(`${id}-challenge`);
            
            if (checkbox.checked) {
                toggle.style.transform = 'translateX(1rem)';
                toggle.style.backgroundColor = '#5D5CDE';
                
                // Enable related inputs
                enableChallengeInputs(id);
            } else {
                toggle.style.transform = 'translateX(0)';
                toggle.style.backgroundColor = '#fff';
                
                // Disable related inputs
                disableChallengeInputs(id);
            }
        }
        
        // Enable inputs related to a challenge
        function enableChallengeInputs(id) {
            if (id === 'screen-time') {
                document.querySelectorAll('input[name="screen-time"]').forEach(input => {
                    input.disabled = false;
                    input.parentElement.querySelector('label').classList.remove('opacity-50');
                });
            } else if (id === 'sleep-reset') {
                document.getElementById('bedtime').disabled = false;
            } else if (id === 'morning-kickstart') {
                document.querySelectorAll('input[name="morning-kickstart"]').forEach(input => {
                    input.disabled = false;
                    input.parentElement.querySelector('label').classList.remove('opacity-50');
                });
            } else if (id === 'mini-move') {
                document.querySelectorAll('input[name="mini-move"]').forEach(input => {
                    input.disabled = false;
                    input.parentElement.querySelector('label').classList.remove('opacity-50');
                });
            } else if (id === 'custom') {
                document.getElementById('custom-challenge-text').disabled = false;
            }
        }
        
        // Disable inputs related to a challenge
        function disableChallengeInputs(id) {
            if (id === 'screen-time') {
                document.querySelectorAll('input[name="screen-time"]').forEach(input => {
                    input.disabled = true;
                    input.parentElement.querySelector('label').classList.add('opacity-50');
                });
            } else if (id === 'sleep-reset') {
                document.getElementById('bedtime').disabled = true;
            } else if (id === 'morning-kickstart') {
                document.querySelectorAll('input[name="morning-kickstart"]').forEach(input => {
                    input.disabled = true;
                    input.parentElement.querySelector('label').classList.add('opacity-50');
                });
            } else if (id === 'mini-move') {
                document.querySelectorAll('input[name="mini-move"]').forEach(input => {
                    input.disabled = true;
                    input.parentElement.querySelector('label').classList.add('opacity-50');
                });
            } else if (id === 'custom') {
                document.getElementById('custom-challenge-text').disabled = true;
            }
        }
        
        // Update challenges checklist in checkin section
        function updateChallengeChecklist() {
            const checklistContainer = document.getElementById('challenge-checklist');
            
            // Clear current content
            while (checklistContainer.children.length > 1) {
                checklistContainer.removeChild(checklistContainer.lastChild);
            }
            
            // Add challenge checkboxes
            let hasSelectedChallenges = false;
            
            for (const [key, value] of Object.entries(appData.plan.challenges)) {
                hasSelectedChallenges = true;
                
                const label = getChallengeLabel(key, value);
                
                if (label) {
                    const div = document.createElement('div');
                    div.className = 'flex items-center mb-2';
                    
                    div.innerHTML = `
                        <input type="checkbox" id="checkin-${key}" class="form-checkbox h-5 w-5 text-primary-600 rounded border-gray-300 dark:border-gray-600 focus:ring-primary-500 dark:focus:ring-primary-400">
                        <label for="checkin-${key}" class="ml-2 text-gray-700 dark:text-gray-300">${label}</label>
                    `;
                    
                    checklistContainer.appendChild(div);
                }
            }
            
            // Update info text
            if (hasSelectedChallenges) {
                checklistContainer.querySelector('p').style.display = 'none';
            } else {
                checklistContainer.querySelector('p').style.display = 'block';
            }
        }
        
        // Get readable label for a challenge
        function getChallengeLabel(key, value) {
            switch (key) {
                case 'screen-time':
                    return `Bildschirmfreie Zeit vor dem Schlafengehen: ${value.option ? value.option : '30 Min.'}`;
                case 'sleep-reset':
                    return `Ins Bett gehen um: ${value.bedtime || 'festgelegte Zeit'}`;
                case 'morning-kickstart':
                    let wakeupTime = '11:00 Uhr';
                    if (value.option === '1030') wakeupTime = '10:30 Uhr';
                    if (value.option === '1000') wakeupTime = '10:00 Uhr';
                    return `Aufstehen bis ${wakeupTime}`;
                case 'mini-move':
                    let moveType = '5 Min. Dehnen';
                    if (value.option === 'walk') moveType = 'Kurzer Spaziergang';
                    if (value.option === 'dance') moveType = 'Etwas Tanzen';
                    return `Bewegung: ${moveType}`;
                case 'family-peace':
                    return 'Positive Familien-Interaktion';
                case 'self-care':
                    return 'Etwas zur Selbstfürsorge tun';
                case 'custom':
                    return value.text || 'Eigene Challenge';
                default:
                    return null;
            }
        }
        
        // Update progress display
        function updateProgressDisplay() {
            // Count completed days
            const completedDays = appData.checkins.filter(checkin => 
                Object.values(checkin.challenges || {}).some(value => value === true)
            ).length;
            
            // Update progress circles
            document.querySelectorAll('.progress-circle').forEach(circle => {
                const day = parseInt(circle.getAttribute('data-day'));
                
                if (day <= completedDays) {
                    circle.classList.add('bg-primary-600', 'text-white');
                    circle.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
                } else {
                    circle.classList.remove('bg-primary-600', 'text-white');
                    circle.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
                }
            });
            
            // Update days completed text
            document.getElementById('days-completed').textContent = `Du hast bisher ${completedDays} von 7 Tagen geschafft`;
            
            // Update reward status
            const rewardStatus = document.getElementById('reward-status');
            if (completedDays >= 5) {
                rewardStatus.classList.remove('hidden');
            } else {
                rewardStatus.classList.add('hidden');
            }
            
            // Update mood chart
            updateMoodChart();
        }
        
        // Update reward display
        function updateRewardDisplay() {
            const rewardDisplay = document.getElementById('reward-display');
            const rewardText = appData.plan.reward;
            
            if (rewardText) {
                rewardDisplay.innerHTML = `<p>${rewardText}</p>`;
            } else {
                rewardDisplay.innerHTML = `<p class="text-gray-500 dark:text-gray-400">Noch keine Belohnung festgelegt.</p>`;
            }
        }
        
        // Update mood chart
        function updateMoodChart() {
            const ctx = document.getElementById('mood-chart').getContext('2d');
            
            // Collect mood data
            const labels = appData.checkins.map(checkin => {
                const date = new Date(checkin.date);
                return date.toLocaleDateString('de-DE', {day: '2-digit', month: '2-digit'});
            });
            
            const data = appData.checkins.map(checkin => checkin.mood || 3);
            
            // Create or update chart
            if (window.moodChart) {
                window.moodChart.data.labels = labels;
                window.moodChart.data.datasets[0].data = data;
                window.moodChart.update();
            } else {
                window.moodChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Stimmung',
                            data: data,
                            borderColor: '#5D5CDE',
                            backgroundColor: 'rgba(93, 92, 222, 0.1)',
                            tension: 0.2,
                            fill: true
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                min: 1,
                                max: 5,
                                ticks: {
                                    stepSize: 1,
                                    callback: function(value) {
                                        const labels = ['😢', '😕', '😐', '🙂', '😄'];
                                        return labels[value - 1];
                                    }
                                }
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }
        }
        
        // Render daily entries
        function renderDailyEntries() {
            const entriesContainer = document.getElementById('daily-entries');
            const noEntriesMessage = document.getElementById('no-entries-message');
            
            // Clear current entries
            while (entriesContainer.firstChild) {
                entriesContainer.removeChild(entriesContainer.firstChild);
            }
            
            // Sort entries by date, newest first
            const sortedEntries = [...appData.checkins].sort((a, b) => 
                new Date(b.date) - new Date(a.date)
            );
            
            if (sortedEntries.length === 0) {
                entriesContainer.appendChild(noEntriesMessage);
                return;
            }
            
            // Render each entry
            sortedEntries.forEach(entry => {
                const date = new Date(entry.date);
                const formattedDate = date.toLocaleDateString('de-DE', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                const entryDiv = document.createElement('div');
                entryDiv.className = 'bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 animate-fade-in';
                
                let moodEmoji = '😐';
                switch(entry.mood) {
                    case 1: moodEmoji = '😢'; break;
                    case 2: moodEmoji = '😕'; break;
                    case 3: moodEmoji = '😐'; break;
                    case 4: moodEmoji = '🙂'; break;
                    case 5: moodEmoji = '😄'; break;
                }
                
                // Count completed challenges
                const completedChallenges = Object.values(entry.challenges || {}).filter(value => value === true).length;
                const totalChallenges = Object.keys(entry.challenges || {}).length;
                
                let challengesHtml = '';
                if (totalChallenges > 0) {
                    challengesHtml = `
                        <div class="mb-2">
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                <span class="font-medium">${completedChallenges}/${totalChallenges}</span> Challenges geschafft
                            </p>
                        </div>
                    `;
                }
                
                entryDiv.innerHTML = `
                    <div class="flex justify-between items-start">
                        <h4 class="font-medium">${formattedDate}</h4>
                        <div class="text-xl">${moodEmoji}</div>
                    </div>
                    ${challengesHtml}
                    <p class="text-gray-600 dark:text-gray-400 mt-2">${entry.note || ''}</p>
                `;
                
                entriesContainer.appendChild(entryDiv);
            });
        }
        
        // Save plan data
        function savePlan() {
            appData.plan.reward = document.getElementById('reward-text').value;
            appData.plan.startDate = document.getElementById('start-date').value;
            appData.plan.name = document.getElementById('name').value;
            
            // Save challenge selections
            appData.plan.challenges = {};
            
            challengeSelectors.forEach(checkbox => {
                if (checkbox.checked) {
                    const id = checkbox.id.replace('-challenge', '');
                    appData.plan.challenges[id] = {};
                    
                    // Save options for each challenge type
                    if (id === 'screen-time') {
                        const selected = document.querySelector('input[name="screen-time"]:checked');
                        if (selected) {
                            appData.plan.challenges[id].option = selected.id.replace('screen-time-', '');
                        }
                    } else if (id === 'sleep-reset') {
                        appData.plan.challenges[id].bedtime = document.getElementById('bedtime').value;
                    } else if (id === 'morning-kickstart') {
                        const selected = document.querySelector('input[name="morning-kickstart"]:checked');
                        if (selected) {
                            appData.plan.challenges[id].option = selected.id.replace('morning-kickstart-', '');
                        }
                    } else if (id === 'mini-move') {
                        const selected = document.querySelector('input[name="mini-move"]:checked');
                        if (selected) {
                            appData.plan.challenges[id].option = selected.id.replace('mini-move-', '');
                        }
                    } else if (id === 'custom') {
                        appData.plan.challenges[id].text = document.getElementById('custom-challenge-text').value;
                    }
                }
            });
            
            // Save data and update UI
            saveData();
            updateChallengeChecklist();
            updateRewardDisplay();
            
            // Show saved message
            planSavedMessage.classList.remove('hidden');
            setTimeout(() => {
                planSavedMessage.classList.add('hidden');
            }, 3000);
        }
        
        // Save daily check-in
        function saveCheckin() {
            const date = document.getElementById('checkin-date').value;
            const mood = document.querySelector('.mood-emoji.selected')?.parentElement.id.replace('mood-', '') || '3';
            const note = document.getElementById('daily-note').value;
            
            // Get checked challenges
            const challenges = {};
            document.querySelectorAll('#challenge-checklist input[type="checkbox"]').forEach(checkbox => {
                const id = checkbox.id.replace('checkin-', '');
                challenges[id] = checkbox.checked;
            });
            
            // Check if an entry for this date already exists
            const existingEntryIndex = appData.checkins.findIndex(entry => entry.date === date);
            
            if (existingEntryIndex !== -1) {
                // Update existing entry
                appData.checkins[existingEntryIndex] = {
                    date,
                    mood: parseInt(mood),
                    challenges,
                    note
                };
            } else {
                // Add new entry
                appData.checkins.push({
                    date,
                    mood: parseInt(mood),
                    challenges,
                    note
                });
            }
            
            // Save data and update UI
            saveData();
            renderDailyEntries();
            updateProgressDisplay();
            
            // Show saved message
            checkinSavedMessage.classList.remove('hidden');
            setTimeout(() => {
                checkinSavedMessage.classList.add('hidden');
            }, 3000);
            
            // Reset form
            document.querySelectorAll('.mood-emoji').forEach(emoji => emoji.classList.remove('selected'));
            document.querySelectorAll('#challenge-checklist input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.getElementById('daily-note').value = '';
        }
        
        // Share daily check-in report
        function shareDaily() {
            // Datum abrufen
            const date = document.getElementById('checkin-date').value;
            
            // Stimmungs-Emoji ermitteln
            const selectedMoodElement = document.querySelector('.mood-emoji.selected');
            let moodEmoji = '😐';
            let moodLevel = 3;
            
            if (selectedMoodElement) {
                const moodId = selectedMoodElement.parentElement.id;
                moodLevel = parseInt(moodId.replace('mood-', ''));
                
                switch(moodLevel) {
                    case 1: moodEmoji = '😢'; break;
                    case 2: moodEmoji = '😕'; break;
                    case 3: moodEmoji = '😐'; break;
                    case 4: moodEmoji = '🙂'; break;
                    case 5: moodEmoji = '😄'; break;
                }
            }
            
            // Erledigte Challenges sammeln
            let completedText = "";
            document.querySelectorAll('#challenge-checklist input[type="checkbox"]').forEach(checkbox => {
                if (checkbox.checked) {
                    completedText += "✓ " + checkbox.nextElementSibling.innerText + "\n";
                }
            });
            
            if(!completedText) {
                completedText = "Heute keine Challenges abgeschlossen";
            }
            
            // Notiz abrufen
            const note = document.getElementById('daily-note').value;
            
            // Zusammenfassung erstellen
            const summary = `📊 MEIN 7-TAGE-CHALLENGE UPDATE

📅 Tag: ${new Date(date).toLocaleDateString('de-DE')}
${moodEmoji} Stimmung: ${moodLevel}/5

GESCHAFFTE CHALLENGES:
${completedText}

${note ? `💭 NOTIZ:\n${note}` : ''}`;
            
            // Text in Zwischenablage kopieren (für Mobilgeräte)
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(summary)
                    .then(() => {
                        alert("Bericht wurde in die Zwischenablage kopiert! Du kannst ihn jetzt in WhatsApp einfügen.");
                        
                        // Auf Mobilgeräten WhatsApp öffnen, falls möglich
                        if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                            if (confirm("WhatsApp öffnen, um den Bericht zu teilen?")) {
                                window.open("https://wa.me/?text=" + encodeURIComponent(summary));
                            }
                        }
                    })
                    .catch(err => {
                        alert("Fehler beim Kopieren: " + err);
                    });
            } else {
                // Fallback für ältere Browser
                const textarea = document.createElement('textarea');
                textarea.value = summary;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert("Bericht wurde in die Zwischenablage kopiert! Du kannst ihn jetzt in WhatsApp einfügen.");
            }
        }
        
        // Save insights
        function saveInsights() {
            appData.insights = document.getElementById('insights').value;
            
            // Save data
            saveData();
            
            // Show saved message
            insightsSavedMessage.classList.remove('hidden');
            setTimeout(() => {
                insightsSavedMessage.classList.add('hidden');
            }, 3000);
        }
        
        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            Object.values(sections).forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            sections[sectionId].classList.add('active');
            
            // Update active tab
            Object.values(tabs).forEach(tab => {
                tab.classList.remove('border-white');
                tab.classList.add('border-transparent');
            });
            
            tabs[sectionId].classList.remove('border-transparent');
            tabs[sectionId].classList.add('border-white');
        }
        
        // Set today's date for the check-in date field
        function setTodayDate() {
            const today = new Date();
            const year = today.getFullYear();
            let month = today.getMonth() + 1;
            let day = today.getDate();
            
            month = month < 10 ? '0' + month : month;
            day = day < 10 ? '0' + day : day;
            
            const dateString = `${year}-${month}-${day}`;
            document.getElementById('checkin-date').value = dateString;
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Tab navigation
            tabs.plan.addEventListener('click', () => showSection('plan'));
            tabs.checkin.addEventListener('click', () => showSection('checkin'));
            tabs.progress.addEventListener('click', () => showSection('progress'));
            
            // Challenge selection toggles
            challengeSelectors.forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const id = e.target.id.replace('-challenge', '');
                    updateToggle(id);
                });
                
                // Set initial toggle state
                const id = checkbox.id.replace('-challenge', '');
                updateToggle(id);
            });
            
            // Radio button selection for challenges
            document.querySelectorAll('.radio-label').forEach(label => {
                label.addEventListener('click', () => {
                    const name = label.getAttribute('for').split('-').slice(0, -1).join('-');
                    
                    // Deselect all options with the same name
                    document.querySelectorAll(`label[for^="${name}"]`).forEach(l => {
                        l.classList.remove('selected');
                    });
                    
                    // Select clicked option
                    label.classList.add('selected');
                });
            });
            
            // Mood selection
            document.querySelectorAll('.mood-option').forEach(option => {
                option.addEventListener('click', () => {
                    // Deselect all emojis
                    document.querySelectorAll('.mood-emoji').forEach(emoji => {
                        emoji.classList.remove('selected');
                    });
                    
                    // Select clicked emoji
                    option.querySelector('.mood-emoji').classList.add('selected');
                });
            });
            
            // Save and share buttons
            savePlanButton.addEventListener('click', savePlan);
            saveCheckinButton.addEventListener('click', saveCheckin);
            shareCheckinButton.addEventListener('click', shareDaily);
            saveInsightsButton.addEventListener('click', saveInsights);
            
            // Set today's date
            setTodayDate();
            
            // Try to load data from localStorage
            try {
                loadData();
            } catch (e) {
                console.error('Error loading data:', e);
            }
            
            // Render daily entries
            renderDailyEntries();
        });
    </script>
</body>
</html>
