<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schwester Magdalena - Chatbot | Das Tonum</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(180deg, #0d1b25 0%, #1a2f3d 50%, #253847 100%);
            color: #e8f0f2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .chatbot-container {
            width: 100%;
            max-width: 600px;
            background: rgba(19, 35, 47, 0.95);
            border: 2px solid #d4a574;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, #1a2f3d 0%, #0d1b25 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #d4a574;
        }
        
        .chatbot-header h1 {
            font-family: 'Cinzel', serif;
            font-size: 1.8em;
            color: #d4a574;
            margin-bottom: 5px;
            text-shadow: 0 0 20px rgba(212, 165, 116, 0.3);
        }
        
        .chatbot-header p {
            font-size: 0.95em;
            color: #a8bac7;
            font-style: italic;
        }
        
        .chat-messages {
            height: 450px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(13, 27, 37, 0.5);
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: rgba(13, 27, 37, 0.3);
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #d4a574;
            border-radius: 4px;
        }
        
        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.bot {
            text-align: left;
        }
        
        .message.user {
            text-align: right;
        }
        
        .message-bubble {
            display: inline-block;
            padding: 12px 18px;
            border-radius: 15px;
            max-width: 80%;
            line-height: 1.6;
        }
        
        .message.bot .message-bubble {
            background: linear-gradient(135deg, #2d4555 0%, #1f3544 100%);
            border: 1px solid #d4a574;
            color: #e8f0f2;
        }
        
        .message.user .message-bubble {
            background: linear-gradient(135deg, #3d5a73 0%, #2d4555 100%);
            border: 1px solid #6b8ba3;
            color: #e8f0f2;
        }
        
        .message-sender {
            font-size: 0.85em;
            margin-bottom: 5px;
            color: #d4a574;
            font-weight: 600;
        }
        
        .typing-indicator {
            display: none;
            padding: 15px;
            text-align: left;
        }
        
        .typing-indicator.active {
            display: block;
        }
        
        .typing-dots {
            display: inline-block;
            background: linear-gradient(135deg, #2d4555 0%, #1f3544 100%);
            border: 1px solid #d4a574;
            padding: 12px 20px;
            border-radius: 15px;
        }
        
        .typing-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #d4a574;
            border-radius: 50%;
            margin: 0 3px;
            animation: typing 1.4s infinite;
        }
        
        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.5;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .chat-options {
            padding: 20px;
            background: rgba(19, 35, 47, 0.8);
            border-top: 2px solid #d4a574;
        }
        
        .option-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #2d4555 0%, #1f3544 100%);
            border: 1px solid #d4a574;
            color: #e8f0f2;
            font-family: 'Crimson Text', serif;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }
        
        .option-button:hover {
            background: linear-gradient(135deg, #3d5a73 0%, #2d4555 100%);
            border-color: #e8c792;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(212, 165, 116, 0.3);
        }
        
        .option-button:last-child {
            margin-bottom: 0;
        }
        
        .candle-icon {
            margin-right: 10px;
            filter: drop-shadow(0 0 5px rgba(212, 165, 116, 0.5));
        }
        
        .back-link {
            text-align: center;
            padding: 15px;
            background: rgba(13, 27, 37, 0.5);
            border-top: 1px solid #2d4555;
        }
        
        .back-link a {
            color: #d4a574;
            text-decoration: none;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }
        
        .back-link a:hover {
            color: #e8c792;
            text-shadow: 0 0 10px rgba(212, 165, 116, 0.5);
        }
        
        @media (max-width: 600px) {
            .chatbot-header h1 {
                font-size: 1.4em;
            }
            
            .chat-messages {
                height: 400px;
            }
            
            .option-button {
                font-size: 0.95em;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <div class="chatbot-header">
            <h1>üïØÔ∏è Schwester Magdalena üïØÔ∏è</h1>
            <p>Bibliothekarin des Klosters S√§ben</p>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will appear here -->
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="chat-options" id="chatOptions">
            <!-- Options will appear here -->
        </div>
        
        <div class="back-link">
            <a href="https://mircodeflorin.github.io/das-tonum.html">‚Üê Zur√ºck zur Hauptseite</a>
        </div>
    </div>

    <script>
        // Chatbot Logic
        const chatMessages = document.getElementById('chatMessages');
        const chatOptions = document.getElementById('chatOptions');
        const typingIndicator = document.getElementById('typingIndicator');
        
        // Conversation database - Enhanced with authentic book content
        const conversations = {
            welcome: {
                message: "Gelobt sei Jesus Christus...\n\nIch bin Schwester Magdalena, 76 Jahre alt und Bibliothekarin dieses Klosters seit... ach, so vielen Jahren.\n\nIhr seid hier, weil Ihr Fragen habt. Das sp√ºre ich. Die Geschehnisse hier oben lassen niemandem Ruhe.\n\nAber wisst: Manche Fenster sollten besser verschlossen bleiben, Kind. üïØÔ∏è\n\nWas m√∂chtet Ihr wissen?",
                options: [
                    { text: "1Ô∏è‚É£ Was ist das Tonum?", action: "tonum" },
                    { text: "2Ô∏è‚É£ Erz√§hlt von der Bibliothek", action: "bibliothek" },
                    { text: "3Ô∏è‚É£ Was geschah mit Marie?", action: "marie" },
                    { text: "4Ô∏è‚É£ √úber Hannah Kronauer", action: "hannah" },
                    { text: "5Ô∏è‚É£ Die alten Ges√§nge", action: "gesaenge" }
                ]
            },
            tonum: {
                message: "Das Tonum...\n\n*ihre zittrigen Finger greifen nach einem alten Buch*\n\nDer Gesang der Berge. Die ersten M√∂nche h√∂rten ihn, als sie diesen Ort fanden. Anno Domini 996.\n\nSie bauten das Kloster nicht zur Ehre Gottes - oder zumindest nicht nur daf√ºr. Sie bauten es als Schutz. Als Gef√§ngnis.\n\nEs ist der Klang zwischen den Kl√§ngen. Nicht f√ºr menschliche Kehlen gedacht. Manche Melodien... sie sollten nie gesungen werden. üïØÔ∏è\n\nDas Tonum ist geduldig, Kind. Es wartet. Immer.",
                options: [
                    { text: "‚ùì Warum ist es gef√§hrlich?", action: "tonum_gefahr" },
                    { text: "üìö Die alten Aufzeichnungen", action: "gesaenge" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            tonum_gefahr: {
                message: "Warum es gef√§hrlich ist?\n\n*sie nimmt ihre Brille ab, putzt sie mit zitternden Fingern*\n\nDas Tonum ist wie ein intelligentes Wesen. Es lernt, passt sich an. Findet die Schw√§chen in unserer Verteidigung.\n\nEs nutzt Dein Blut. Deine Essenz. Es sucht sich einen Weg hinein.\n\nMarie... sie hatte die Gabe. Konnte Muster erkennen, wo andere nur Noten sahen. Die gleiche Gabe wie Hannah damals.\n\nUnd das machte sie zur perfekten... Vermittlerin. üïØÔ∏è\n\nManche T√ºren, wenn sie einmal ge√∂ffnet sind, lassen sich nicht mehr schliessen.",
                options: [
                    { text: "‚ùì Was geschah mit Marie?", action: "marie" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            bibliothek: {
                message: "Meine Bibliothek...\n\n*ein schwaches L√§cheln huscht √ºber ihr faltiges Gesicht*\n\nB√ºcher sind wie Fenster in andere Welten, Kind. Aber manche Fenster sollten besser verschlossen bleiben.\n\nHier bewahren wir die alten Chroniken. Handgeschriebene B√§nde voller seltsamer Symbole und geometrischer Zeichnungen. Die wahren Ges√§nge. Nicht die, die in den offiziellen B√ºchern stehen.\n\nDie ersten M√∂nche entwickelten sie. Jede Note, jede Pause ist pr√§zise berechnet, um mit den Klangwellen des Tonums zu interferieren. üïØÔ∏è\n\nDr. Thaler... er hat die √Ñbtissin √ºberzeugt, ihm Zugang zu gew√§hren. Das war... ein Fehler.",
                options: [
                    { text: "‚ùì Wer ist Dr. Thaler?", action: "thaler" },
                    { text: "üìñ Die wahren Ges√§nge?", action: "gesaenge" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            thaler: {
                message: "Dr. Marcus Thaler...\n\n*ihre Stimme wird leiser, als f√ºrchte sie unerw√ºnschte Zuh√∂rer*\n\nEin Wissenschaftler. Die √Ñbtissin unterst√ºtzt seine Forschungen. Er hat... Modernisierungen vorgenommen.\n\n√úberwachungskameras, Bewegungssensoren, eine Glasfaserleitung durchs ganze Kloster. Alles, was die moderne Technik hergibt.\n\nEr sagt, er erforscht gregorianische Musik. Die harmonischen Strukturen, die mathematischen Muster.\n\nAber ich sehe es in seinen Augen... die gleiche brennende Neugierde. Der gleiche Hunger nach Verst√§ndnis.\n\nZu viel wie Hannahs Vater. üïØÔ∏è",
                options: [
                    { text: "‚ùì Was ist mit Hannahs Vater?", action: "hannah_vater" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            hannah: {
                message: "Hannah...\n\n*sie schliesst kurz die Augen*\n\nSie war dreizehn, als ihre Mutter sie zu uns brachte. 'Hier wird sie sicher sein', sagte sie mit br√ºchiger Stimme.\n\nAber Hannah hatte die gleiche Sensitivit√§t wie ihr Vater. Die gleiche Faszination f√ºr die Zwischent√∂ne. Es liegt im Blut, versteht Ihr? Wird weitergegeben, von Generation zu Generation.\n\nIch wurde ihre F√ºhrerin. Lehrte sie die sch√ºtzenden Harmonien. Die wahren Ges√§nge.\n\nAber sie war zu neugierig. Zu viel wie ihr Vater. üïØÔ∏è\n\nNach zwanzig Jahren kehrt sie zur√ºck. Die Dinge hier... sie sind anders geworden. Das Kloster ist nicht mehr der Ort, den sie kannte.",
                options: [
                    { text: "‚ùì Was ist mit ihrem Vater?", action: "hannah_vater" },
                    { text: "‚ùì Warum kommt sie zur√ºck?", action: "marie" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            hannah_vater: {
                message: "Hannahs Vater...\n\n*ihre H√§nde zittern st√§rker*\n\nEr hatte die Gabe. Konnte die Zwischenr√§ume h√∂ren. Die L√ºcken zwischen den T√∂nen, zwischen den Welten.\n\nBis er versuchte, sie zu imitieren. Das ist die Gefahr, versteht Ihr?\n\nDas Tonum lockt uns, verspricht Erkenntnis, Transzendenz. Aber der menschliche Geist ist nicht daf√ºr geschaffen, diese Frequenzen zu reproduzieren.\n\nEr versuchte, eine Br√ºcke zu bauen - und wurde selbst zur T√ºr.\n\nDie Narbe in Hannahs Handfl√§che... ein Echo vergangener Ereignisse. Sie wird nie vergessen. üïØÔ∏è",
                options: [
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            marie: {
                message: "Marie...\n\n*ihre Hand zittert leicht, die Sorgenfalten vertiefen sich*\n\nDie arme Schwester Marie. Sie war wie immer eine der Letzten beim √úben. Ihr Gesangsbuch liegt noch genau so, wie sie es zur√ºckgelassen hat.\n\nSie hatte eine Gabe. Verbrachte viel Zeit hier in der Bibliothek. Studierte die urspr√ºnglichen Aufzeichnungen.\n\nUnd dann... sie begann Fragen zu stellen. √úber die Geschichte des Klosters. √úber Dr. Thalers wahre Absichten.\n\nAm 15. November verschwand sie nach der Abendandacht.\n\nIhre Zelle: leer. Ihr Rosenkranz: auf dem Boden. üïØÔ∏è\n\nIch habe sie gewarnt. Aber manche h√∂ren nicht, bis es zu sp√§t ist.",
                options: [
                    { text: "‚ùì Was fand sie in den Aufzeichnungen?", action: "marie_fund" },
                    { text: "üîç Hannahs Ermittlung", action: "ermittlung" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            marie_fund: {
                message: "Was sie fand...\n\n*sie schl√§gt ein altes Buch auf, vergilbte Seiten rascheln*\n\nSeltsame Symbole. Keine gew√∂hnlichen Noten. Geometrische Formen, mathematische Formeln.\n\nIn ihrem Tagebuch schrieb sie:\n'Die Frequenzen werden st√§rker. Ich h√∂re sie √ºberall. Ein konstanter Unterton unter der Stille. Manchmal kann ich sie fast sehen, wie schimmernde Schwingungsmuster...'.\n\n'Es f√ºhlt sich gierig an. Schwester Magdalena warnt mich, aber sie versteht nicht, wie tief es schon geht.'\n\nSie verstand zu viel. Und zu wenig. üïØÔ∏è",
                options: [
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" },
                    { text: "üìñ Mehr √ºber das Buch", action: "buch" }
                ]
            },
            gesaenge: {
                message: "Die alten Ges√§nge...\n\nDas sind keine gew√∂hnlichen Chor√§le. Sie wurden nicht komponiert, um Gott zu preisen, sondern um etwas Anderes fernzuhalten.\n\nJede Note, jede Pause ist pr√§zise berechnet. Sie interferieren mit den Klangwellen des Tonums.\n\nDie ersten M√∂nche entwickelten sie. Die wahren Ges√§nge. Unser Schutz, unsere Verteidigung gegen das, was durch die Frequenzen zu uns durchdringen will.\n\nAber die Symbole... sie sind keine toten Zeichen. Sie sind aktiv, lebendig. Jedes Mal, wenn man sie reproduziert, √∂ffnet man eine winzige T√ºr.\n\nUnd das Tonum... es braucht nur einen Spalt. üïØÔ∏è",
                options: [
                    { text: "‚ùì √úber das Tonum", action: "tonum" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            ermittlung: {
                message: "Hannah ist zur√ºckgekehrt...\n\nNach zwanzig Jahren. Ich rief sie an, in jener Nacht. 'Gott sei Dank erreiche ich Sie. Marie ist verschwunden.'\n\nSie kam sofort. Drei Stunden durchs Schneegest√∂ber.\n\nIch f√ºhrte sie zum Chorraum. Die Kratzspuren am Boden... sie f√ºhrten zur Seitent√ºr. Zum alten Kellergew√∂lbe.\n\n'Das wird seit Jahren nicht mehr benutzt', sagte ich. Aber Hannah... sie erkennt die Zeichen. Immer noch.\n\nDie Narbe in ihrer Hand pochte im Rhythmus eines unh√∂rbaren Pulses. Das Kloster erinnert sich an sie. üïØÔ∏è",
                options: [
                    { text: "üìñ Das Buch lesen", action: "buch" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            buch: {
                message: "Ihr wollt die ganze Geschichte wissen...\n\nDas Tonum erscheint am 20. Dezember 2025.\n\nEin Mystery-Thriller von Mirco Deflorin. Die Wahrheit √ºber das Kloster, √ºber Marie, √ºber Hannah, √ºber den Klang.\n\nAber seid gewarnt, Kind:\n\nManche Geheimnisse sollten begraben bleiben.\nManche T√ºren, wenn sie einmal ge√∂ffnet sind, lassen sich nicht mehr schliessen.\n\nWisst Ihr sicher, dass Ihr bereit seid? üïØÔ∏è\n\nM√∂ge der Herr euch besch√ºtzen.",
                options: [
                    { text: "üõí Jetzt vorbestellen", action: "shop_bod" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            },
            shop_bod: {
                message: "Ihr werdet zur Hauptseite weitergeleitet...\n\nDort k√∂nnt Ihr das Buch vorbestellen und die ganze Geschichte erfahren.\n\nAber denkt daran:\n\nWissen ist wie ein zweischneidiges Schwert. Je mehr Ihr versteht, desto gr√∂sser wird die Versuchung sein, tiefer zu gehen.\n\nGeht mit Gott... und h√∂rt nicht auf die Stimmen in den Mauern. üïØÔ∏è\n\nBis bald, Kind.",
                options: [
                    { text: "üîó Zur Hauptseite", action: "redirect" },
                    { text: "‚Ü©Ô∏è Zur√ºck zum Men√º", action: "welcome" }
                ]
            }
        };
        
        // Initialize chat
        function initChat() {
            showMessage('bot', conversations.welcome.message);
            showOptions(conversations.welcome.options);
        }
        
        // Show message
        function showMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const senderName = sender === 'bot' ? 'Schwester Magdalena' : 'Du';
            
            messageDiv.innerHTML = `
                <div class="message-sender">${senderName}</div>
                <div class="message-bubble">${text.replace(/\n/g, '<br>')}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Show options
        function showOptions(options) {
            chatOptions.innerHTML = '';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.innerHTML = `<span class="candle-icon">üïØÔ∏è</span>${option.text}`;
                button.onclick = () => handleOption(option.text, option.action);
                chatOptions.appendChild(button);
            });
        }
        
        // Handle option selection
        function handleOption(text, action) {
            // Show user's choice
            showMessage('user', text);
            
            // Clear options temporarily
            chatOptions.innerHTML = '';
            
            // Show typing indicator
            typingIndicator.classList.add('active');
            
            // Simulate thinking delay
            setTimeout(() => {
                typingIndicator.classList.remove('active');
                
                // Handle special actions
                if (action === 'redirect') {
                    window.location.href = 'https://mircodeflorin.github.io/das-tonum.html';
                    return;
                }
                
                // Show conversation
                const conversation = conversations[action];
                if (conversation) {
                    showMessage('bot', conversation.message);
                    showOptions(conversation.options);
                }
            }, 1500); // 1.5 second delay for realism
        }
        
        // Start the chat
        initChat();
    </script>
</body>
</html>
